# .github/.github/workflows/auto-create-issues.yml
name: Auto Create Issues for New Repos
on:
  repository:
    types: [created]

jobs:
  create-default-issues:
    runs-on: ubuntu-latest
    steps:
      - name: Create Welcome Issue
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.ORG_TOKEN }}
          script: |
            await github.rest.issues.create({
              owner: '${{ github.event.organization.login }}',
              repo: '${{ github.event.repository.name }}',
              title: 'ğŸ“Œ [ê³ ì •] ë¦¬í¬ì§€í† ë¦¬ ì‹œì‘ ê°€ì´ë“œ',
              body: `
            ## ğŸ‰ ìƒˆë¡œìš´ ë¦¬í¬ì§€í† ë¦¬ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!
            
            ### ğŸ“‹ ì´ˆê¸° ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸
            - [ ] README.md ì‘ì„±
            - [ ] ë¼ì´ì„ ìŠ¤ ì„¤ì •
            - [ ] ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™ ì„¤ì •
            - [ ] íŒ€ì› ê¶Œí•œ ì„¤ì •
            - [ ] CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±
            
            ### ğŸ“ ë¬¸ì˜ì‚¬í•­
            ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ #dev-support ì±„ë„ë¡œ ì—°ë½ì£¼ì„¸ìš”.
            `,
              labels: ['ğŸ“Œ ê³ ì •', 'ğŸš€ ì‹œì‘']
            });
            
      - name: Pin the Issue
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.ORG_TOKEN }}
          script: |
            const issues = await github.rest.issues.listForRepo({
              owner: '${{ github.event.organization.login }}',
              repo: '${{ github.event.repository.name }}',
              labels: 'ğŸ“Œ ê³ ì •'
            });
            
            if (issues.data.length > 0) {
              await github.rest.issues.update({
                owner: '${{ github.event.organization.login }}',
                repo: '${{ github.event.repository.name }}',
                issue_number: issues.data[0].number,
                state: 'open',
                pinned: true
              });
            }
